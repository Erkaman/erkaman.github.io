(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.vines = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
function vines (reglLib, canvasId) {
  var createRegl = require('../common.js').createRegl
  var runAnimation = require('../common.js').runAnimation

  const regl = createRegl(reglLib, canvasId)

  runAnimation(regl, function () {
    layer1()
  })

  var layer1 = regl({
    frag: `
    precision mediump float;

    varying vec2 vUv;

    uniform float tick;
    void main () {
      vec2 uv = vUv;
      vec3 c;

      float x;

      /*
        uv.x *= 1.4;
        uv.y *= 1.4;
      */

      x = 0.3 * sin(uv.x * 10.2 + tick * 0.002) * cos(uv.y * uv.x * 9.0 - tick * 0.002);

      x += 0.08 *sin((uv.y) * 10.0);
      x += 0.005 *sin((uv.y - tick*0.001) * 100.0);
      x += 0.002 *sin((uv.x - tick*0.001) * 100.0);

      float a = 0.8*cos(x * 100.0); // * sin(x * 70.0);

      c = vec3(1.0, 0.0, 0.1);
      c *= a;

      gl_FragColor = vec4(c, 1.0);
    }`
  })
}

module.exports = vines

},{"../common.js":2}],2:[function(require,module,exports){
module.exports.runAnimation = function (regl, cb) {
/*
  var createReglRecorder = require('regl-recorder')

  const VIDEO_WIDTH = 480
  const VIDEO_HEIGHT = 270

  const regl = require('regl')(require('gl')(VIDEO_WIDTH, VIDEO_HEIGHT, {preserveDrawingBuffer: true, antialias: true}))

  var recorder = createReglRecorder(regl, 500)
*/
  var globalScope = regl({
    attributes: {
      position: [-2, 0, 0, -2, 2, 2]
    },

    uniforms: {
      tick: ({tick}) => tick
    },

    count: 3,

    vert: `
    precision mediump float;
    attribute vec2 position;
    varying vec2 vUv;

    void main () {
      vUv = position;
      gl_Position = vec4(1.0 - 2.0 * position, 0.0, 1);
    }`,

    depth: { enable: false }
  })

  regl.frame(({viewportWidth, viewportHeight}) => {
    regl.clear({ color: [0, 0, 0, 1] })

    globalScope(() => {
      cb()
    })

//    recorder.frame(viewportWidth, viewportHeight)
  })

  return regl
}

module.exports.createRegl = function (reglLib, canvasId) {
  var canvas = document.getElementById(canvasId)
  if (canvas === null) {
    canvas = document.body.appendChild(document.createElement('canvas'))
    canvas.style.width = '480px'
    canvas.style.height = '270px'
  }
  var context = canvas.getContext('webgl', {
    antialias: false
  })

  return reglLib(context)
}

},{}]},{},[1])(1)
});